(i=>{window.zyreGetTranslated=function(e,t){return elementorCommon.translate(e,null,t,ZyreAddonsEditor.i18n)},elementor.hooks.addFilter("panel/elements/regionViews",function(e){var t,n,o,i,r,s;return ZyreAddonsEditor.hasPro||ZyreAddonsEditor.promotion_widgets.length<=0||(n=e.elements.view,o=e.categories.view,i=e.elements.options.collection,r=e.categories.options.collection,s=[],_.each(ZyreAddonsEditor.promotion_widgets,function(e,t){i.add({name:"zyre-"+t,title:e.title,icon:e.icon,categories:["zyre-elements-pro"],editable:!1})}),i.each(function(e){"zyre-elements-pro"===e.get("categories")[0]&&s.push(e)}),(t=r.findIndex({name:"zyre_addons_category"}))&&r.add({name:"zyre_addons_pro_category",title:"Zyre Addons Pro",icon:"eicon-lock",defaultActive:!1,sort:!0,hideIfEmpty:!0,items:s,promotion:!1},{at:t+1}),e.elements.view=n.extend({childView:n.prototype.childView.extend(r={className:function(){var e="elementor-element-wrapper";return this.isEditable()||(e+=" elementor-element--promotion"),!this.isEditable()&&this.isZyreWidget()&&(e+=" zyre-element--promotion"),e},isZyreWidget:function(){return 0===this.model.get("name").indexOf("zyre-")},onMouseDown:function(){this.isZyreWidget()?elementor.promotion.showDialog({title:zyreGetTranslated("promotionDialogTitle",[this.model.get("title")]),content:zyreGetTranslated("promotionDialogMessage",[this.model.get("title")]),targetElement:this.el,position:{blockStart:"-7"},actionButton:{url:"#",text:ZyreAddonsEditor.i18n.promotionDialogBtnText,classes:["elementor-button","zyre-btn--promotion","go-pro"]}}):this.constructor.__super__.onMouseDown.call(this)}})}),e.categories.view=o.extend({childView:o.prototype.childView.extend({childView:o.prototype.childView.prototype.childView.extend(r)})})),e}),elementor.hooks.addFilter("elementor/social_icons/network_name",function(e,t,n,o,i){return e.replace(/^Zy /,"")}),elementor.channels.editor.on("section:activated",function(e,t){var n,t=t.getOption("editedElementView");"zyre-flipbox"!==t.model.get("widgetType")||(e=-1!==["section_back_content","section_back_style","section_back_btn_style","section_back_btn_icon_style"].indexOf(e),t.$el.toggleClass("zyre-flipbox--flipped",e),n=t.$el.find(".zyre-flipbox-back"),e&&n.css("transition","none"),e)||setTimeout(function(){n.css("transition","")},10)});var e=elementor.modules.controls.BaseData.extend({getSelect2Placeholder:function(){return this.ui.select.children('option:first[value=""]').text()||this.model.get("placeholder")},getDependencyArgs:function(){var n=this,o=n.model.get("dynamic_params");return(o=_.isObject(o)?o:{}).control_dependency&&_.isObject(o.control_dependency)&&_.each(o.control_dependency,function(e,t){o[t]=n.container.settings.get(e)}),o},getSelect2DefaultOptions:function(){var t=this;return{allowClear:!0,placeholder:this.getSelect2Placeholder(),dir:elementorCommon.config.isRTL?"rtl":"ltr",minimumInputLength:1,ajax:{url:ajaxurl,dataType:"json",method:"POST",delay:250,data:function(e){e={nonce:ZyreAddonsEditor.editor_nonce,action:"zyre_process_dynamic_select",object_type:"post",query_term:e.term};return i.extend(e,t.model.get("dynamic_params"),t.getDependencyArgs())},processResults:function(e){var n;return e.success&&0!==e.data.length?(n=[],_.each(e.data,function(e,t){n.push({id:t,text:e})}),{results:n}):{results:[{id:-1,text:ZyreAddonsEditor.i18n.NoResultsMessage,disabled:!0}]}},cache:!0}}},getSelect2Options:function(){return i.extend(this.getSelect2DefaultOptions(),this.model.get("select2options"))},addLoadingSpinner:function(){this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>')},onBeforeRender:function(){var n,e;this.isRendered||(e=(n=this).getControlValue(),_.isEmpty(e))||(_.isArray(e)||(e=[e]),e={nonce:ZyreAddonsEditor.editor_nonce,action:"zyre_process_dynamic_select",object_type:"post",saved_values:e},i.ajax({url:ajaxurl,type:"POST",data:i.extend(e,n.model.get("dynamic_params"),n.getDependencyArgs()),beforeSend:n.addLoadingSpinner.bind(this),success:function(e){var t;e.success&&0!==e.data.length&&(t=_.keys(e.data).map(function(e){return" "+i.trim(e)}),n.container.settings.set(n.model.get("name"),t),n.model.set("options",e.data),n.render())}}))},applySavedValue:function(){elementor.modules.controls.BaseData.prototype.applySavedValue.apply(this,arguments),this.ui.select.data("select2")?this.ui.select.trigger("change"):(this.ui.select.select2(this.getSelect2Options()),this.model.get("sortable")&&this.initSortable())},initSortable:function(){var e=this.$el.find("ul.select2-selection__rendered"),t=this;e.sortable({containment:"parent",update:function(){t._orderSortedOption(e),t.container.settings.setExternalChange(t.model.get("name"),t.ui.select.val()),t.model.set("options",t.ui.select.val())}})},_orderSortedOption:function(e){var o=this;e.children("li[title]").each(function(e,t){var n=o.ui.select.children("option").filter(function(){return i(this).html()==t.title});o._moveOptionToEnd(n)})},_moveOptionToEnd:function(e){var t=e.parent();e.detach(),t.append(e)},onBeforeDestroy:function(){this.ui.select.select2("destroy"),this.$el.remove()}});elementor.addControlView("zyre_select2",e)})(jQuery);