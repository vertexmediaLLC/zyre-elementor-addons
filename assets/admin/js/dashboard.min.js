((n,i)=>{let t=n(".zyre-sidebar-toggle"),e=n(".zyre-sidebar-close"),a=n(".zyre-dashboard-overlay");var s=n(".zyre-dashboard-wrapper"),o=n(".zyre-content-wrapper"),c=o.find(".zyre-video-item"),d="#zyre-video-modal",r=o.find(d),l=r.find(".zyre-iframe-scaler"),B=r.find(".zyre-modal-close"),h="#zyre-subscription-modal",f=s.find(h),s=f.find(".zyre-modal-close"),E=f.find("#zyre-user-did-subscribed"),u=n("#zyre-dashboard-form"),v=u.find(".zyre-save-settings"),y=o.find(".zyre-dashboard-tabs-nav"),p=o.find(".zyre-tab-panel"),M=o.find('.content-integrations input[type="text"]'),g=o.find(".zyre-dash-widget-sidebar"),b=g.find(".zyre-dash-widget-sidebar-list"),Q=o.find(".zyre-dash-widget-content-main"),w=b.find(".zyre-dash-widget-sidebar-item"),m=".zyre-dash-widget-tab:not(.widget-pro-placeholder)",z='.zyre-widget-style-type-checkbox input[type="checkbox"]',k='.zyre-widget-style-type-checkbox input[type="checkbox"]:checked',C='.zyre-tabs-up-content-right-widget input[type="checkbox"]',R=o.find(".zyre-enable-all-btn"),V=o.find(".zyre-disable-all-btn"),x=o.find(m+" "+C),Y=o.find(m+" "+z);c.click(function(e){e.preventDefault();var e=n(this).attr("href"),e=(e=(e=e).match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/]+\/.+|(?:v|embed|shorts)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/))?e[1]:null;l.append(`<iframe class="zyre-video-iframe" src="https://www.youtube.com/embed/${e}?autoplay=1" frameborder="0" allowfullscreen></iframe>`),r.addClass("video-modal-shown").show()}),B.click(function(){r.fadeOut(function(){r.removeClass("video-modal-shown"),l.find("iframe").remove()})}),n(window).click(function(e){n(e.target).is(d)&&r.fadeOut(function(){r.removeClass("video-modal-shown"),l.find("iframe").remove()})}),s.click(function(){f.fadeOut(function(){document.cookie="ZY_SB_MODAL_CLOSED=yes; path=/; max-age=604800",f.removeClass("video-modal-shown")})}),n(window).click(function(e){n(e.target).is(h)&&f.fadeOut(function(){f.removeClass("video-modal-shown")})}),E.on("click",function(){n.ajax({url:i.ajaxUrl,type:"POST",data:{action:"zyreaddons_user_subscribed",nonce:i.nonce},success:function(e){e.success&&f.fadeOut(function(){f.removeClass("video-modal-shown")})}})}),y.on("click",".zyre-tab-nav-item",function(e){var t=n(e.currentTarget),i=e.currentTarget.hash,a=".content-"+i.substring(1),a=o.find(a);e.preventDefault(),t.addClass("nav-item-active").siblings().removeClass("nav-item-active"),p.removeClass("zyre-tab-panel-active"),a.addClass("zyre-tab-panel-active"),"#integrations"===i?a.addClass("integrations-tab-active"):p.removeClass("integrations-tab-active"),window.location.hash=i}),b.on("click",".zyre-dash-widget-sidebar-item",function(e){e.preventDefault();var e=n(this),t=e.data("tab"),t=Q.find("#"+t);e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")}),g.on("input","#zyre-sidebar-search",function(){let e=n(this).val().toLowerCase();w.each(function(){n(this).text().toLowerCase().includes(e)?n(this).show():n(this).hide()})});let D=()=>{g.hasClass("open")&&a.hasClass("active")&&(g.removeClass("open"),a.removeClass("active"))},O,L,_,S;t.click(function(e){e.stopPropagation(),g.toggleClass("open"),a.toggleClass("active")}),n(document).on("click",function(e){n(e.target).closest(g).length||n(e.target).closest(t).length||D()}),w.click(D),e.click(function(){D()}),a.click(function(){D()}),(window.location.hash||window.location.search)&&(O=window.location.hash,_=(L=new URLSearchParams(window.location.search)).get("t"),S=L.get("widget"),O?y.find('a[href="'+O+'"]').trigger("click"):_&&y.find('a[href="#'+_+'"]').trigger("click"),S)&&b.find('[data-tab="'+S+'-widget-tab"]').trigger("click");var T={},j=!1,A=!1;u.find('input[type="text"]').each(function(){T[n(this).attr("id")]=n(this).val()}),u.find('input[type="checkbox"]').each(function(){T[n(this).attr("id")]=n(this).is(":checked")});let P=()=>{A=j=!1,u.find('input[type="checkbox"], input[type="text"]').each(function(){var e=n(this).attr("id");return n(this).is(":checkbox")&&n(this).is(":checked")!==T[e]?!(j=!0):n(this).is(":text")&&n(this).val()!==T[e]?!(A=!0):void 0}),v.attr("disabled",!(j||A))},U=()=>{x.each(function(){var e=n(this).prop("checked"),t=n(this).closest(m);e?t.addClass("zyre-widget-active"):t.removeClass("zyre-widget-active")})},Z=(e,t=!1)=>{var i=e.prop("checked"),e=e.closest(m),a=0===e.find(k).length;i?(e.addClass("zyre-widget-active"),t&&a&&e.find(".zyre-dash-each-widget-style.widget-style--active-default").find(z).prop("checked",!0)):e.removeClass("zyre-widget-active")};M.on("input",function(){P()}),R.click(function(){x.prop("checked",!0),U(),P()}),V.click(function(){x.prop("checked",!1),U(),P()}),x.change(function(){Z(n(this),!0),P()}),Y.change(function(){var e=n(this).closest(".zyre-dash-widget-tab");0===e.find(k).length&&(e.find(C).prop("checked",!1),Z(n(this))),P()}),u.on("submit",function(e){e.preventDefault(),n.post({url:i.ajaxUrl,data:{nonce:i.nonce,action:i.action,formData:u.serialize()},beforeSend:function(){v.addClass("saving")},success:function(e){var t;e.success&&(t=setTimeout(function(){v.removeClass("saving").attr("disabled",!0).children(".zyre-save-text").text(i.savedLabel),j=!1,location.reload(),clearTimeout(t)},500))}})}),n(window).on("beforeunload",function(e){j&&(e.preventDefault(),e.returnValue=!0)})})(jQuery,window.ZyreAddonsDashboard);