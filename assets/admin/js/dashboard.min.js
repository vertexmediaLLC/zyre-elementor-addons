((n,i)=>{let t=n(".zyre-sidebar-toggle"),e=n(".zyre-sidebar-close"),a=n(".zyre-dashboard-overlay");var s=n(".zyre-content-wrapper"),c=s.find(".zyre-video-item"),o="#zyre-video-modal",r=s.find(o),d=s.find(".zyre-iframe-scaler"),l=s.find(".zyre-modal-close"),h=n("#zyre-dashboard-form"),f=h.find(".zyre-save-settings"),u=s.find(".zyre-dashboard-tabs-nav"),v=s.find(".zyre-tab-panel"),g=s.find('.content-integrations input[type="text"]'),p=s.find(".zyre-dash-widget-sidebar"),y=p.find(".zyre-dash-widget-sidebar-list"),b=s.find(".zyre-dash-widget-content-main"),w=y.find(".zyre-dash-widget-sidebar-item"),m=".zyre-dash-widget-tab:not(.widget-pro-placeholder)",z='.zyre-widget-style-type-checkbox input[type="checkbox"]',k='.zyre-widget-style-type-checkbox input[type="checkbox"]:checked',C='.zyre-tabs-up-content-right-widget input[type="checkbox"]',R=s.find(".zyre-enable-all-btn"),V=s.find(".zyre-disable-all-btn"),x=s.find(m+" "+C),$=s.find(m+" "+z);c.click(function(e){e.preventDefault();var e=n(this).attr("href"),e=(e=(e=e).match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/]+\/.+|(?:v|embed|shorts)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/))?e[1]:null;d.append(`<iframe class="zyre-video-iframe" src="https://www.youtube.com/embed/${e}?autoplay=1" frameborder="0" allowfullscreen></iframe>`),r.addClass("video-modal-shown").show()}),l.click(function(){r.fadeOut(function(){r.removeClass("video-modal-shown"),d.find("iframe").remove()})}),n(window).click(function(e){n(e.target).is(o)&&r.fadeOut(function(){r.removeClass("video-modal-shown"),d.find("iframe").remove()})}),u.on("click",".zyre-tab-nav-item",function(e){var t=n(e.currentTarget),i=e.currentTarget.hash,a=".content-"+i.substring(1),a=s.find(a);e.preventDefault(),t.addClass("nav-item-active").siblings().removeClass("nav-item-active"),v.removeClass("zyre-tab-panel-active"),a.addClass("zyre-tab-panel-active"),"#integrations"===i?a.addClass("integrations-tab-active"):v.removeClass("integrations-tab-active"),window.location.hash=i}),y.on("click",".zyre-dash-widget-sidebar-item",function(e){e.preventDefault();var e=n(this),t=e.data("tab"),t=b.find("#"+t);e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")}),p.on("input","#zyre-sidebar-search",function(){let e=n(this).val().toLowerCase();w.each(function(){n(this).text().toLowerCase().includes(e)?n(this).show():n(this).hide()})});let D=()=>{p.hasClass("open")&&a.hasClass("active")&&(p.removeClass("open"),a.removeClass("active"))},L,T,j,A;t.click(function(e){e.stopPropagation(),p.toggleClass("open"),a.toggleClass("active")}),n(document).on("click",function(e){n(e.target).closest(p).length||n(e.target).closest(t).length||D()}),w.click(D),e.click(function(){D()}),a.click(function(){D()}),(window.location.hash||window.location.search)&&(L=window.location.hash,j=(T=new URLSearchParams(window.location.search)).get("t"),A=T.get("widget"),L?u.find('a[href="'+L+'"]').trigger("click"):j&&u.find('a[href="#'+j+'"]').trigger("click"),A)&&y.find('[data-tab="'+A+'-widget-tab"]').trigger("click");var O={},P=!1,S=!1;h.find('input[type="text"]').each(function(){O[n(this).attr("id")]=n(this).val()}),h.find('input[type="checkbox"]').each(function(){O[n(this).attr("id")]=n(this).is(":checked")});let U=()=>{S=P=!1,h.find('input[type="checkbox"], input[type="text"]').each(function(){var e=n(this).attr("id");return n(this).is(":checkbox")&&n(this).is(":checked")!==O[e]?!(P=!0):n(this).is(":text")&&n(this).val()!==O[e]?!(S=!0):void 0}),f.attr("disabled",!(P||S))},Z=()=>{x.each(function(){var e=n(this).prop("checked"),t=n(this).closest(m);e?t.addClass("zyre-widget-active"):t.removeClass("zyre-widget-active")})},Q=(e,t=!1)=>{var i=e.prop("checked"),e=e.closest(m),a=0===e.find(k).length;i?(e.addClass("zyre-widget-active"),t&&a&&e.find(".zyre-dash-each-widget-style.widget-style--active-default").find(z).prop("checked",!0)):e.removeClass("zyre-widget-active")};g.on("input",function(){U()}),R.click(function(){x.prop("checked",!0),Z(),U()}),V.click(function(){x.prop("checked",!1),Z(),U()}),x.change(function(){Q(n(this),!0),U()}),$.change(function(){var e=n(this).closest(".zyre-dash-widget-tab");0===e.find(k).length&&(e.find(C).prop("checked",!1),Q(n(this))),U()}),h.on("submit",function(e){e.preventDefault(),n.post({url:i.ajaxUrl,data:{nonce:i.nonce,action:i.action,formData:h.serialize()},beforeSend:function(){f.addClass("saving")},success:function(e){var t;e.success&&(t=setTimeout(function(){f.removeClass("saving").attr("disabled",!0).children(".zyre-save-text").text(i.savedLabel),P=!1,location.reload(),clearTimeout(t)},500))}})}),n(window).on("beforeunload",function(e){P&&(e.preventDefault(),e.returnValue=!0)})})(jQuery,window.ZyreAddonsDashboard);