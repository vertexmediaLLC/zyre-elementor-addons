((r,s)=>{window.zyrePreStylesInitialized=window.zyrePreStylesInitialized||{};var e=s.modules.controls.Select.extend({onReady:function(){window.zyrePreStylesStore=window.zyrePreStylesStore||{},window.zyrePreStylesCached=window.zyrePreStylesCached||{},window.currentSelectedValue=this.ui.select.val(),window.zyrePreStylesInitialized[this.getWidgetID()]||(this.fetchStyles(!this.isDuplicated()),window.zyrePreStylesInitialized[this.getWidgetID()]=!0)},onRender:function(){this.constructor.__super__.onRender.apply(this,arguments)},onElementChange:function(){this.$el.find(".zyre-reset-style").removeAttr("disabled")},addResetButton:function(){var e=this;this.ui.select.parent().prev().after('<button class="zyre-reset-style" title="Reset Current Style"><i class="eicon-undo" aria-hidden="true"></i> Reset</button>'),this.$el.find(".zyre-reset-style").on("click",function(){e.onResetClick()})},onResetClick:function(){var e=this.ui.select.val(),t=this.getStylesMerged(!0);t[e]&&window.confirm(zyrePreStyles.resetStyleAlert)&&this.resetStyle(t[e])},getElementSettingsModel:function(){return this.container.settings},getWidgetAction:function(){var e=this.container.document.history.currentItem?.attributes;return void 0!==e?.action?e.action.toLowerCase():""},isDuplicated:function(){return"duplicate"===this.getWidgetAction()},getWidgetName:function(){return this.getElementSettingsModel().get("widgetType")},getWidgetID:function(){return this.container.model.id},fetchStyles:function(i=!1,e=!1){var t,n=this;this.getWidgetName()&&(t=s.config.initial_document.id,t={action:"zyre_widget_set_prestyle",widget:this.getWidgetName(),widgetID:this.getWidgetID(),post_id:t,security:zyrePreStyles.security},e&&(t.reset=!0),r.get(zyrePreStyles.ajaxUrl,t).done(function(e){var t;e.success&&(n.setStyles(e.data),i)&&(e=n.ui.select.val(),(t=n.getStyles())[e])&&n.applyStyle(t[e])}))},setStyles:function(e){window.zyrePreStylesStore[this.getWidgetName()]=JSON.parse(e)},getStyles:function(){return window.zyrePreStylesStore[this.getWidgetName()]||{}},onBaseInputChange:function(e){var t;this.constructor.__super__.onBaseInputChange.apply(this,arguments),e.currentTarget.value&&(e=e.currentTarget.value,this.cacheCurrentStyle(window.currentSelectedValue),window.currentSelectedValue=e,(t=this.getStylesMerged())[e])&&this.applyStyle(t[e])},cacheCurrentStyle:function(e){var t=this.getElementSettingsModel().toJSON(),i=this.ui.select.attr("data-setting")||"",i=(t.hasOwnProperty(i)&&(t[i]=e),this.getWidgetID());window.zyrePreStylesCached[i]||(window.zyrePreStylesCached[i]={}),window.zyrePreStylesCached[i][e]||(window.zyrePreStylesCached[i][e]={}),window.zyrePreStylesCached[i][e]=t},getStylesCached:function(){return window.zyrePreStylesCached||{}},getStylesMerged:function(e=!1){var t=this.getStylesCached()[this.getWidgetID()],i=this.getStyles();return e?{...t,...i}:{...i,...t}},applyStyle:function(i){var e=this.getElementSettingsModel().controls,n={};_.each(e,function(e,t){"repeater"!==e.type&&i.hasOwnProperty(t)&&(""===i[t]?n[t]="":n[t]=i[t])}),this.getElementSettingsModel().setExternalChange(n),this.container.render()},resetStyle:function(i){var n=this.getElementSettingsModel().defaults,r={};_.each(n,function(e,t){i.hasOwnProperty(t)?""===i[t]?r[t]="":r[t]=i[t]:r[t]=n[t]}),this.getElementSettingsModel().setExternalChange(r),this.container.render()}});s.addControlView("zyre_style_select",e)})(jQuery,window.elementor);